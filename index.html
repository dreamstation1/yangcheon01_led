<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ë²„ìŠ¤ ì•ˆë‚´ ì „ê´‘íŒ (í†µí•©)</title>
  <style>
    @font-face {
      font-family: 'HYê²¬ê³ ë”•';
      src: url('HYê²¬ê³ ë”•.ttf') format('truetype');
      font-display: swap;
      font-weight: normal;
      font-style: normal;
    }
    
    /* í°íŠ¸ ë¡œë”© ì‹¤íŒ¨ ì‹œ ëŒ€ì²´ í°íŠ¸ */
    .font-fallback {
      font-family: 'HYê²¬ê³ ë”•', 'Malgun Gothic', 'ë§‘ì€ ê³ ë”•', 'Arial', sans-serif;
    }
    body {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      margin: 0;
      background-color: white;
      height: 100vh;
      gap: 20px;
    }
    .square {
      position: relative;
      width: 1280px;
      height: 320px;
      background-color: rgb(33, 33, 33);
      border: 20px solid rgb(20, 20, 20);
      overflow: hidden;
    }
    .grid-overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: grid;
      grid-template-columns: repeat(128, 1fr);
      grid-template-rows: repeat(32, 1fr);
      z-index: 2;
      pointer-events: none;
    }
    .cell { border: 0.5px solid rgb(60, 60, 60); aspect-ratio: 1 / 1; }
    .title {
      position: absolute;
      top: 5px;
      left: 50%;
      transform: translateX(-50%);
      color: yellow;
      font-size: 120px;
      font-family: 'HYê²¬ê³ ë”•', 'Malgun Gothic', 'ë§‘ì€ ê³ ë”•', 'Arial', sans-serif;
      z-index: 1;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .title span { margin: 0 100px; }
    .scroll-text {
      position: absolute;
      bottom: 20px;
      white-space: nowrap;
      font-size: 120px;
      font-family: 'HYê²¬ê³ ë”•', 'Malgun Gothic', 'ë§‘ì€ ê³ ë”•', 'Arial', sans-serif;
      z-index: 1;
      display: none;
      transform: translateX(0);
    }
    .yellow { color: yellow; }
    .orange { color: orange; }
    .red { color: red; }
    .green { color: lime; }
    .third-top, .third-bottom, .fourth-top, .fourth-bottom {
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      font-size: 100px;
      font-family: 'HYê²¬ê³ ë”•', 'Malgun Gothic', 'ë§‘ì€ ê³ ë”•', 'Arial', sans-serif;
      z-index: 1;
      display: none;
      white-space: nowrap;
    }
    .third-top { top: 20px; }
    .third-bottom { bottom: 20px; }
    .fourth-top { top: 20px; }
    .fourth-bottom { bottom: 20px; }
    .location-display {
      position: fixed;
      top: 20px;
      left: 200px;
      color: #333;
      font-size: 20px;
      font-family: monospace;
      z-index: 10;
      background: rgba(255,255,255,0.95);
      padding: 10px 15px;
      border-radius: 8px;
      white-space: nowrap;
      border: 2px solid #666;
      box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    }
    
    /* ë‘ ë²ˆì§¸ ë””ìŠ¤í”Œë ˆì´ ìŠ¤íƒ€ì¼ */
    .top-label {
      position: absolute;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 110px;
      font-family: 'HYê²¬ê³ ë”•', 'Malgun Gothic', 'ë§‘ì€ ê³ ë”•', 'Arial', sans-serif;
      color: lime;
      z-index: 1;
      white-space: nowrap;
      display: none;
    }
    .scroll-lcd {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      white-space: nowrap;
      font-size: 110px;
      font-family: 'HYê²¬ê³ ë”•', 'Malgun Gothic', 'ë§‘ì€ ê³ ë”•', 'Arial', sans-serif;
      color: yellow;
      z-index: 1;
      left: 0;
      display: none;
    }
    .center-line {
      position: absolute;
      left: 0;
      width: 100%;
      height: 4px;
      background: red;
      top: 50%;
      transform: translateY(-50%);
      z-index: 3;
      display: none;
    }
    
    /* ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
    .control-buttons {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      justify-content: center;
    }
    .control-btn {
      padding: 10px 20px;
      font-size: 16px;
      font-family: 'HYê²¬ê³ ë”•', sans-serif;
      background-color: #333;
      color: white;
      border: 2px solid #555;
      border-radius: 5px;
      cursor: pointer;
      transition: all 0.3s;
    }
    .control-btn:hover {
      background-color: #555;
      border-color: #777;
    }
    .control-btn.active {
      background-color: #007bff;
      border-color: #0056b3;
    }
    
    /* êµ¬í˜•/ì‹ í˜• ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
    .model-buttons {
      display: flex;
      gap: 10px;
      margin-bottom: 10px;
    }
    .model-btn {
      padding: 8px 16px;
      font-size: 14px;
      font-family: 'HYê²¬ê³ ë”•', sans-serif;
      background-color: #555;
      color: white;
      border: 2px solid #777;
      border-radius: 5px;
      cursor: pointer;
      transition: all 0.3s;
    }
    .model-btn:hover {
      background-color: #777;
      border-color: #999;
    }
    .model-btn.active {
      background-color: #37d85c;
      border-color: #17b63c;
    }
  </style>
</head>
<body>
  <div class="square">
    <!-- ì²« ë²ˆì§¸ ë””ìŠ¤í”Œë ˆì´ ìš”ì†Œë“¤ -->
    <div class="title" id="title"><span>ì•Œ</span><span>ë¦¼</span></div>

    <!-- ìŠ¤í¬ë¡¤ ë¬¸êµ¬ 1~8 -->
    <div class="scroll-text" id="scroll-text-1">
      <span class="yellow">ë²„ìŠ¤ê°€ ì£¼í–‰ì¤‘ì—ëŠ” ìë¦¬ì—ì„œ </span><span class="red">ì´ë™ì„ ì‚¼ê°€í•˜ì‹œê³ </span>
      <span class="green">ë‚´ë¦¬ì‹¤ë¶„ì€ ì•‰ì€ìë¦¬ì—ì„œ </span><span class="red">ë²¨ì„</span>
      <span class="yellow">ë¯¸ë¦¬ ëˆŒëŸ¬ì£¼ì‹œê³  </span><span class="red">ë²„ìŠ¤ê°€ ì™„ì „íˆ ì •ì°¨í•œí›„</span>
      <span class="green">í•˜ì°¨ í•´ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.</span>
    </div>
    <div class="scroll-text" id="scroll-text-2">
      <span class="red">*ë¬´ì œí•œ ì„œìš¸ ëŒ€ì¤‘êµí†µ ì´ìš©*</span><span class="green">ëª¨ë°”ì¼í‹°ë¨¸ë‹ˆ </span><span class="yellow">ê¸°í›„ë™í–‰ì¹´ë“œ</span>
    </div>
    <div class="scroll-text" id="scroll-text-3">
      <span class="yellow">ì°¨ë‚´ </span><span class="red">í†µí™”ë¥¼ </span><span class="yellow">í•˜ì‹¤ë•ŒëŠ” </span><span class="red">ê·“ì†ë§ë¡œ</span>
      <span class="green"> í•´ì£¼ì‹œê³  </span><span class="yellow">ì˜† ì‚¬ëŒì—ê²Œ </span><span class="red">ë°©í•´ê°€ </span><span class="green">ë˜ì§€ ì•Šë„ë¡ </span><span class="yellow">í•´ì£¼ì‹œê¸° </span><span class="red">ë°”ëë‹ˆë‹¤.</span>
    </div>
    <div class="scroll-text" id="scroll-text-4">
      <span class="yellow">ì´ ì°¨ëŸ‰ì€ </span><span class="green">ê³µê¸°ì²­ì •ê¸°</span><span class="yellow">ë¥¼ ê°€ë™í•˜ì—¬ </span><span class="red">ë°”ì´ëŸ¬ìŠ¤,ì„¸ê·  </span><span class="yellow">ì˜ 2ì°¨ ê°ì—¼ì„ </span><span class="green">ì˜ˆë°© </span><span class="yellow">í•˜ê³  ìˆìŠµë‹ˆë‹¤.</span>
    </div>
    <div class="scroll-text" id="scroll-text-5">
      <span class="orange">êµí†µì¹´ë“œ </span><span class="red">ì”ì•¡ì´ ê¶ê¸ˆí• ë•? </span><span class="orange">ëª¨ë°”ì¼í‹°ë¨¸ë‹ˆ ì•±! </span><span class="green">ë°”ë¡œ ì¶©ì „ë„ ê°€ëŠ¥í•´ìš”~</span>
    </div>
    <div class="scroll-text" id="scroll-text-6">
      <span class="orange">ê¹¨ë—í•˜ê³ ,</span><span class="red"> ì•ˆì „í•˜ê³ ,</span><span class="green"> ì¹œì ˆí•œ </span><span class="orange"> ì„œë¹„ìŠ¤ë¡œ ê³ ê° ì—¬ëŸ¬ë¶„ê»˜ </span><span class="green"> ë”ìš± ê°€ê¹Œì´ ë‹¤ê°€ê°€ê² ìŠµë‹ˆë‹¤ </span><span class="orange"> . </span>
    </div>
    <div class="scroll-text" id="scroll-text-7">
      <span class="red">ì•ˆì „ì„ ìœ„í•´</span><span class="orange"> í•˜ì°¨ì‹œ ì¢Œìš° í™•ì¸! <</span><span class="green">ê¸¸ì„ ê±´ë„ë•ŒëŠ”</span><span class="red"> íš¡ë‹¨ë³´ë„ ì´ìš©</span><span class="orange">â–¶</span>
    </div>
    <div class="scroll-text" id="scroll-text-8">
      <span class="orange">ì‚¬ëŒì´ ë³´ì´ë©´ </span><span class="red"> ì¼ë‹¨,ë©ˆì¶¤!  "</span><span class="orange">í•œìˆœê°„ì˜ ë¬´ë‹¨íš¡ë‹¨,</span><span class="red">êµí†µì‚¬ê³ ë„ </span><span class="green">í•œìˆœê°„ì…ë‹ˆë‹¤.</span>
    </div>

    <div class="third-top" id="third-top">
      <span class="yellow">ëª©ë™ìš´ìˆ˜ </span><span class="green">ì–‘ì²œ</span><span class="red">01</span>
    </div>
    <div class="third-bottom" id="third-bottom">
      <span class="green">ì²«ì°¨ </span><span class="red">05:30 </span><span class="green">ë§‰ì°¨ </span><span class="red">23:40</span>
    </div>

    <div class="fourth-top" id="fourth-top"></div>
    <div class="fourth-bottom" id="fourth-bottom"></div>

    <!-- ë‘ ë²ˆì§¸ ë””ìŠ¤í”Œë ˆì´ ìš”ì†Œë“¤ -->
    <div class="top-label" id="topLabel">ì´ë²ˆ ì •ë¥˜ì†Œ</div>
    <div class="scroll-lcd" id="scrollLcd">ì–‘í‰í•œì‹ ì•„íŒŒíŠ¸, 9í˜¸ì„ ì„ ìœ ë„ì—­</div>
    <div class="center-line" id="centerLine"></div>

    <div class="grid-overlay" id="grid-overlay"></div>
  </div>
  
  <div class="location-display" id="locationDisplay">ìœ„ì¹˜: ë¶ˆëª…</div>

  <!-- êµ¬í˜•/ì‹ í˜• ì„ íƒ ë²„íŠ¼ë“¤ -->
  <div class="model-buttons">
    <button class="model-btn" id="oldModelBtn">êµ¬í˜•</button>
    <button class="model-btn active" id="newModelBtn">ì‹ í˜•</button>
  </div>

  <!-- ì œì–´ ë²„íŠ¼ë“¤ -->
  <div class="control-buttons">
    <button class="control-btn active" id="display1Btn">ì•ˆë‚´ ë¬¸êµ¬</button>
    <button class="control-btn" id="display2Btn">ì •ë¥˜ì†Œ ì•ˆë‚´</button>
  </div>

  <!-- ì˜¤ë””ì˜¤ íŒŒì¼ë“¤ (íŒŒì¼ì´ ì—†ì–´ë„ ì‘ë™í•˜ë„ë¡ ì„¤ì •) -->
  <!-- ì˜¤ë””ì˜¤ íŒŒì¼ë“¤ (íŒŒì¼ì´ ì—†ì–´ë„ ì‘ë™í•˜ë„ë¡ ì„¤ì •) -->
  <audio id="announcement" src="sunyudo.mp3" preload="none"></audio>
  <audio id="dangsanAudio" src="dangsan.mp3" preload="none"></audio>
  <audio id="dangsanSunAudio" src="dangsanSun.mp3" preload="none"></audio>
  <audio id="mok6Audio" src="mok6.mp3" preload="none"></audio>
  <audio id="mok5bAudio" src="mok5b.wav" preload="none"></audio>
  <audio id="mok5cAudio" src="paris.wav" preload="none"></audio>
  <audio id="mokStadiumAudio" src="mok5c.wav" preload="none"></audio>
  <audio id="wolchonAudio" src="mok1.mp3" preload="none"></audio>

  <script>
    // ì „ì—­ ë³€ìˆ˜ë“¤
    let currentDisplay = 1; // 1: ì•ˆë‚´ ë¬¸êµ¬, 2: ì •ë¥˜ì†Œ ì•ˆë‚´
    let currentModel = 'new'; // 'old': êµ¬í˜•, 'new': ì‹ í˜•
    let display1Interval;
    let display2Timeout;
    let previousLat = null;
    let previousLon = null;
    let currentDirection = 'unknown'; // 'up': ìƒí–‰(ë‹¹ì‚°â†’ëª©ë™), 'down': í•˜í–‰(ëª©ë™â†’ë‹¹ì‚°)
    
    // ì²« ë²ˆì§¸ ë””ìŠ¤í”Œë ˆì´ ê´€ë ¨ ë³€ìˆ˜ë“¤
    const scrollTexts = [
      { id: 'scroll-text-1', duration: 24370 },
      { id: 'scroll-text-2', duration: 10000 },
      { id: 'scroll-text-3', duration: 17000 },
      { id: 'scroll-text-4', duration: 15000 },
      { id: 'scroll-text-5', duration: 13000 },
      { id: 'scroll-text-6', duration: 15000 },
      { id: 'scroll-text-7', duration: 11000 },
      { id: 'scroll-text-8', duration: 13000 }
    ];

    const title = document.getElementById('title');
    const thirdTop = document.getElementById('third-top');
    const thirdBottom = document.getElementById('third-bottom');
    const fourthTop = document.getElementById('fourth-top');
    const fourthBottom = document.getElementById('fourth-bottom');
    const locationDisplay = document.getElementById('locationDisplay');
    const containerWidth = 1280;
    const speed = 330;
    let lastIndex = 0;
    let currentSpeed = 31.4;
    let inTarget = false;

    // ë‘ ë²ˆì§¸ ë””ìŠ¤í”Œë ˆì´ ê´€ë ¨ ë³€ìˆ˜ë“¤
    const topLabel = document.getElementById('topLabel');
    const scrollLcd = document.getElementById('scrollLcd');
    const centerLine = document.getElementById('centerLine');
    const audio = document.getElementById('announcement'); // nullì¼ ìˆ˜ ìˆìŒ

    // ë²„íŠ¼ ìš”ì†Œë“¤
    const display1Btn = document.getElementById('display1Btn');
    const display2Btn = document.getElementById('display2Btn');
    const oldModelBtn = document.getElementById('oldModelBtn');
    const newModelBtn = document.getElementById('newModelBtn');

    // ë°©í–¥ ë¶„ì„ í•¨ìˆ˜
    function analyzeDirection(currentLat, currentLon) {
      if (previousLat === null || previousLon === null) {
        // ì²« ë²ˆì§¸ ìœ„ì¹˜ ì—…ë°ì´íŠ¸ì¸ ê²½ìš° ë°©í–¥ì„ ì•Œ ìˆ˜ ì—†ìŒ
        return 'unknown';
      }
      
      // ìœ„ë„ ë³€í™”ë¡œ ë°©í–¥ íŒë‹¨ (ìœ„ë„ê°€ ì¦ê°€í•˜ë©´ ë¶ìª½ìœ¼ë¡œ ì´ë™)
      const latChange = currentLat - previousLat;
      const lonChange = currentLon - previousLon;
      
      // ë” ì •í™•í•œ ë°©í–¥ íŒë‹¨ì„ ìœ„í•´ ì„ê³„ê°’ì„ ë‚®ì¶¤
      const threshold = 0.0005; // ì•½ 50ë¯¸í„° ì •ë„ì˜ ë³€í™”
      
      // ëª©ë™6ë‹¨ì§€ìƒê°€ ê·¼ì²˜ (37.536231, 126.882298)ì—ì„œ ì„ ìœ ë„ì—­ ê·¼ì²˜ (37.539756, 126.887565)ë¡œ ì´ë™í•˜ëŠ” ê²½ìš°
      // ìœ„ë„ê°€ ì¦ê°€í•˜ê³  ê²½ë„ë„ ì¦ê°€í•˜ëŠ” ê²ƒì´ í•˜í–‰(ëª©ë™â†’ë‹¹ì‚°)
      // ë‹¹ì‚°ì—­ì—ì„œ ì„ ìœ ë„ì—­ìœ¼ë¡œ ê°€ë©´ ìƒí–‰(ë‹¹ì‚°â†’ëª©ë™), 6ë‹¨ì§€ì—ì„œ ì„ ìœ ë„ì—­ìœ¼ë¡œ ê°€ë©´ í•˜í–‰(ëª©ë™â†’ë‹¹ì‚°)
      if (Math.abs(latChange) > threshold) {
        if (latChange > 0) {
          return 'down'; // í•˜í–‰: ëª©ë™â†’ë‹¹ì‚° (ë¶ìª½ìœ¼ë¡œ ì´ë™)
        } else {
          return 'up'; // ìƒí–‰: ë‹¹ì‚°â†’ëª©ë™ (ë‚¨ìª½ìœ¼ë¡œ ì´ë™)
        }
      }
      
      // ìœ„ë„ ë³€í™”ê°€ ì‘ì€ ê²½ìš° ê²½ë„ ë³€í™”ë¡œ íŒë‹¨
      if (Math.abs(lonChange) > threshold) {
        if (lonChange > 0) {
          return 'down'; // í•˜í–‰: ëª©ë™â†’ë‹¹ì‚° (ë™ìª½ìœ¼ë¡œ ì´ë™)
        } else {
          return 'up'; // ìƒí–‰: ë‹¹ì‚°â†’ëª©ë™ (ì„œìª½ìœ¼ë¡œ ì´ë™)
        }
      }
      
      return 'unknown';
    }
    
    // ìƒ‰ìƒ ë³€ê²½ í•¨ìˆ˜ë“¤
    function updateColors() {
      const yellowElements = document.querySelectorAll('.yellow');
      const orangeElements = document.querySelectorAll('.orange');
      const greenElements = document.querySelectorAll('.green');
      
      if (currentModel === 'old') {
        // êµ¬í˜•: ë…¸ë€ìƒ‰ â†’ ì£¼í™©ìƒ‰, ì£¼í™©ìƒ‰ â†’ ì£¼í™©ìƒ‰ ìœ ì§€, ì´ˆë¡ìƒ‰ â†’ ì§„í•œ ì´ˆë¡ìƒ‰
        yellowElements.forEach(el => {
          el.style.color = 'orange';
        });
        orangeElements.forEach(el => {
          el.style.color = 'orange';
        });
        greenElements.forEach(el => {
          el.style.color = '#37d85c'; // ë°ì€ ì´ˆë¡ìƒ‰
        });
      } else {
        // ì‹ í˜•: ë…¸ë€ìƒ‰ â†’ ë…¸ë€ìƒ‰ ìœ ì§€, ì£¼í™©ìƒ‰ â†’ ë…¸ë€ìƒ‰, ì´ˆë¡ìƒ‰ â†’ ë°ì€ ì´ˆë¡ìƒ‰
        yellowElements.forEach(el => {
          el.style.color = 'yellow';
        });
        orangeElements.forEach(el => { 
          el.style.color = 'yellow';
        });
        greenElements.forEach(el => {
          el.style.color = 'lime';
        });
      }
      
      // ì •ë¥˜ì†Œ ì•ˆë‚´ ìš”ì†Œë“¤ì˜ ìƒ‰ìƒë„ ì—…ë°ì´íŠ¸
      if (currentDisplay === 2) {
        if (currentModel === 'old') {
          // êµ¬í˜•: ëª¨ë“  ë…¸ë€ìƒ‰ â†’ ì£¼í™©ìƒ‰, ëª¨ë“  ì´ˆë¡ìƒ‰ â†’ ë°ì€ ì´ˆë¡ìƒ‰
          scrollLcd.style.color = 'orange';
          topLabel.style.color = '#37d85c';
        } else {
          // ì‹ í˜•: ëª¨ë“  ì£¼í™©ìƒ‰ â†’ ë…¸ë€ìƒ‰, ëª¨ë“  ì´ˆë¡ìƒ‰ â†’ ë°ì€ ì´ˆë¡ìƒ‰
          scrollLcd.style.color = 'yellow';
          topLabel.style.color = 'lime';
        }
      }
      
      // "ì•Œë¦¼" ì œëª© ìƒ‰ìƒë„ ì—…ë°ì´íŠ¸
      if (currentModel === 'old') {
        title.style.color = 'orange'; // êµ¬í˜•: ë…¸ë€ìƒ‰ â†’ ì£¼í™©ìƒ‰
      } else {
        title.style.color = 'yellow'; // ì‹ í˜•: ì›ë˜ ë…¸ë€ìƒ‰
      }
    }
    
    // ì²« ë²ˆì§¸ ë””ìŠ¤í”Œë ˆì´ í•¨ìˆ˜ë“¤
    function randomNext() {
      if (inTarget || currentDisplay !== 1) return;
      let next;
      do { next = Math.floor(Math.random() * 8) + 1; } while (next === lastIndex);
      lastIndex = next;
      showMessage(next);
    }

    function showMessage(index) {
      if (currentDisplay !== 1) return;
      
      scrollTexts.forEach(item => document.getElementById(item.id).style.display = 'none');
      thirdTop.style.display = 'none';
      thirdBottom.style.display = 'none';
      fourthTop.style.display = 'none';
      fourthBottom.style.display = 'none';
      title.style.display = 'flex';

      if (index === 6) {
        title.style.display = 'none';
        thirdTop.style.display = 'block';
        thirdBottom.style.display = 'block';
        updateColors(); // ìƒ‰ìƒ ì—…ë°ì´íŠ¸
        display1Interval = setTimeout(randomNext, 5000);
        return;
      }

      if (index === 7) {
        title.style.display = 'none';
        thirdTop.style.display = 'block';
        thirdBottom.style.display = 'block';
        updateColors(); // ìƒ‰ìƒ ì—…ë°ì´íŠ¸
        display1Interval = setTimeout(randomNext, 5000);
        return;
      }

      const elem = document.getElementById(`scroll-text-${index}`);
      elem.style.display = 'block';
      updateColors(); // ìƒ‰ìƒ ì—…ë°ì´íŠ¸
      const width = elem.scrollWidth;
      const totalDistance = width + containerWidth;
      const duration = totalDistance / speed;
      elem.style.transform = `translateX(0)`;
      elem.style.transition = 'none';

      setTimeout(() => {
        elem.style.transition = `transform ${duration}s linear`;
        elem.style.transform = `translateX(-${totalDistance}px)`;
      }, 500);

      display1Interval = setTimeout(randomNext, scrollTexts[index - 1].duration);
    }

    // ë‘ ë²ˆì§¸ ë””ìŠ¤í”Œë ˆì´ í•¨ìˆ˜ë“¤
    function startDisplay2() {
      console.log('startDisplay2 í•¨ìˆ˜ ì‹œì‘');
      currentDisplay = 2; // ë””ìŠ¤í”Œë ˆì´ ëª¨ë“œ ì„¤ì •
      
      // ëª¨ë“  ì²« ë²ˆì§¸ ë””ìŠ¤í”Œë ˆì´ ìš”ì†Œ ìˆ¨ê¸°ê¸°
      title.style.display = 'none';
      scrollTexts.forEach(item => document.getElementById(item.id).style.display = 'none');
      thirdTop.style.display = 'none';
      thirdBottom.style.display = 'none';
      fourthTop.style.display = 'none';
      fourthBottom.style.display = 'none';
      console.log('ì²« ë²ˆì§¸ ë””ìŠ¤í”Œë ˆì´ ìš”ì†Œë“¤ ìˆ¨ê¹€ ì™„ë£Œ');

      // ë‘ ë²ˆì§¸ ë””ìŠ¤í”Œë ˆì´ ìš”ì†Œë“¤ í‘œì‹œ
      topLabel.textContent = 'ì´ë²ˆ ì •ë¥˜ì†Œ';
      topLabel.style.display = 'block';
      scrollLcd.textContent = 'ì–‘í‰í•œì‹ ì•„íŒŒíŠ¸, 9í˜¸ì„ ì„ ìœ ë„ì—­';
      scrollLcd.style.display = 'block';
      centerLine.style.display = 'block';
      updateColors(); // ìƒ‰ìƒ ì—…ë°ì´íŠ¸
      console.log('ë‘ ë²ˆì§¸ ë””ìŠ¤í”Œë ˆì´ ìš”ì†Œë“¤ í‘œì‹œ ì™„ë£Œ: ì´ë²ˆ ì •ë¥˜ì†Œ - ì–‘í‰í•œì‹ ì•„íŒŒíŠ¸, 9í˜¸ì„ ì„ ìœ ë„ì—­');
      
      // ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì—…ë°ì´íŠ¸
      display2Btn.classList.add('active');
      display1Btn.classList.remove('active');

      const textWidth = scrollLcd.scrollWidth;
      const totalDistance = textWidth + containerWidth;
      const duration = totalDistance / speed;

      scrollLcd.style.transform = 'translateX(0)';
      scrollLcd.style.transition = 'none';
      
      // ì˜¤ë””ì˜¤ ì¬ìƒ (ì‚¬ìš©ì ìƒí˜¸ì‘ìš© í›„ì—ë§Œ)
      playAudioSafely('announcement');

      setTimeout(() => {
        scrollLcd.style.transition = `transform ${duration}s linear`;
        scrollLcd.style.transform = `translateX(-${totalDistance}px)`;
      }, 500);

      // 5.38ì´ˆ í›„ â†’ ì²« í™”ë©´ ìˆ¨ê¸°ê³  â†’ ë‹¤ìŒ ì •ë¥˜ì†Œ í‘œì‹œ
      display2Timeout = setTimeout(() => {
        scrollLcd.style.display = 'none';
        topLabel.style.display = 'none';
        centerLine.style.display = 'none';

        setTimeout(() => {
          topLabel.textContent = 'ë‹¤ìŒ ì •ë¥˜ì†Œ';
          topLabel.style.display = 'block';

          scrollLcd.textContent = 'ì§€í•˜ì²  2,9í˜¸ì„  ë‹¹ì‚°ì—­';
          scrollLcd.style.left = '50%';
          scrollLcd.style.top = '50%';
          scrollLcd.style.transform = 'translateX(-50%) translateY(0%)';
          scrollLcd.style.transition = 'none';
          scrollLcd.style.display = 'block';

          centerLine.style.display = 'block';
          updateColors(); // ìƒ‰ìƒ ì—…ë°ì´íŠ¸
        }, 500);
      }, 5380);

      // 15ì´ˆ í›„ â†’ ì˜ì–´ ì•ˆë‚´ë¡œ êµì²´
      setTimeout(() => {
        topLabel.textContent = 'THIS STOP IS';
        topLabel.style.display = 'block';

        scrollLcd.textContent = 'Yangpyeong Hanshin Apt. Line 9 Seonyudo Station';
        scrollLcd.style.left = '0';
        scrollLcd.style.top = '50%';
        scrollLcd.style.transform = 'translateY(0%)';
        scrollLcd.style.transition = 'none';
        scrollLcd.style.display = 'block';
        updateColors(); // ìƒ‰ìƒ ì—…ë°ì´íŠ¸

        const engTextWidth = scrollLcd.scrollWidth;
        const engTotalDistance = engTextWidth + containerWidth;
        const engDuration = engTotalDistance / speed;

        setTimeout(() => {
          scrollLcd.style.transition = `transform ${engDuration}s linear`;
          scrollLcd.style.transform = `translate(-${engTotalDistance}px, 0%)`;
        }, 500);
      }, 15000);

      // 21.85ì´ˆ í›„ â†’ ëª¨ë‘ ìˆ¨ê¹€ (0.5ì´ˆ)
      setTimeout(() => {
        topLabel.style.display = 'none';
        scrollLcd.style.display = 'none';
        centerLine.style.display = 'none';

        setTimeout(() => {
          topLabel.textContent = 'NEXT STOP IS';
          topLabel.style.display = 'block';

          scrollLcd.textContent = 'Line 2 Dangsan Station';
          scrollLcd.style.left = '0';
          scrollLcd.style.top = '50%';
          scrollLcd.style.transform = 'translateY(0%)';
          scrollLcd.style.transition = 'none';
          scrollLcd.style.display = 'block';

          centerLine.style.display = 'block';
          updateColors(); // ìƒ‰ìƒ ì—…ë°ì´íŠ¸

          const eng2Width = scrollLcd.scrollWidth;
          const eng2TotalDistance = eng2Width + containerWidth;
          const eng2Duration = eng2TotalDistance / speed;

          // ëª©ë™1ë‹¨ì§€ìƒê°€ ì˜ì–´ ì•ˆë‚´ë§Œ 3ì´ˆ ë” ì˜¤ë˜ ë³´ì—¬ì¤Œ
          const engNextDelay = engNextText === 'Mok 1 Danji Store. Ewha Womans Univ. Mok-dong Hospital' ? 3500 : 500;
          setTimeout(() => {
            scrollLcd.style.transition = `transform ${eng2Duration}s linear`;
            scrollLcd.style.transform = `translate(-${eng2TotalDistance}px, 0%)`;
            // ì •ë¥˜ì†Œ ì•ˆë‚´ ì™„ë£Œ í›„ ì•ˆë‚´ ë¬¸êµ¬ë¡œ ìë™ ì „í™˜
            setTimeout(() => {
              switchToDisplay1();
            }, (eng2Duration + 0.5) * 1000);
          }, engNextDelay);
        }, 500);
      }, 21850);
    }

    // ë””ìŠ¤í”Œë ˆì´ ì „í™˜ í•¨ìˆ˜ë“¤
    function switchToDisplay1() {
      currentDisplay = 1;
      
      // ë‘ ë²ˆì§¸ ë””ìŠ¤í”Œë ˆì´ ìš”ì†Œë“¤ ìˆ¨ê¸°ê¸°
      topLabel.style.display = 'none';
      scrollLcd.style.display = 'none';
      centerLine.style.display = 'none';
      
      // ì²« ë²ˆì§¸ ë””ìŠ¤í”Œë ˆì´ ì‹œì‘
      randomNext();
      
      // ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì—…ë°ì´íŠ¸
      display1Btn.classList.add('active');
      display2Btn.classList.remove('active');
      
      // ìƒ‰ìƒ ì—…ë°ì´íŠ¸
      updateColors();
    }

    // ì •ë¥˜ì†Œë³„ ì•ˆë‚´ í•¨ìˆ˜ (ì§€ì •ëœ ì˜¤ë””ì˜¤ë¡œ)
    function startStationAnnouncementWithAudio(station, audioId) {
      console.log(`${station.name} ì •ë¥˜ì†Œ ì•ˆë‚´ ì‹œì‘ (ì§€ì • ì˜¤ë””ì˜¤: ${audioId})`);
      currentDisplay = 2;
      
      // ì²« ë²ˆì§¸ ë””ìŠ¤í”Œë ˆì´ ì •ì§€
      if (display1Interval) {
        clearTimeout(display1Interval);
        console.log('ì²« ë²ˆì§¸ ë””ìŠ¤í”Œë ˆì´ íƒ€ì´ë¨¸ ì •ì§€ë¨');
      }
      
      // ëª¨ë“  ì²« ë²ˆì§¸ ë””ìŠ¤í”Œë ˆì´ ìš”ì†Œ ìˆ¨ê¸°ê¸°
      title.style.display = 'none';
      scrollTexts.forEach(item => document.getElementById(item.id).style.display = 'none');
      thirdTop.style.display = 'none';
      thirdBottom.style.display = 'none';
      fourthTop.style.display = 'none';
      fourthBottom.style.display = 'none';
      
      // ë‘ ë²ˆì§¸ ë””ìŠ¤í”Œë ˆì´ ìš”ì†Œë“¤ í‘œì‹œ
      topLabel.textContent = 'ì´ë²ˆ ì •ë¥˜ì†Œ';
      topLabel.style.display = 'block';
      scrollLcd.textContent = station.displayText;
      scrollLcd.style.display = 'block';
      centerLine.style.display = 'block';
      updateColors(); // ìƒ‰ìƒ ì—…ë°ì´íŠ¸
      
      // ëª©ë™5ë‹¨ì§€Bìƒê°€ì™€ ëª©5ë™ì£¼ë¯¼ì„¼í„°ëŠ” ê°€ìš´ë° ì •ë ¬, ë‚˜ë¨¸ì§€ëŠ” ìŠ¤í¬ë¡¤
      if (station.name === 'ëª©ë™5ë‹¨ì§€Bìƒê°€' || station.name === 'ëª©ë™5ë‹¨ì§€Cìƒê°€') {
        scrollLcd.style.left = '50%';
        scrollLcd.style.top = '50%';
        scrollLcd.style.transform = 'translateX(-50%) translateY(0%)';
        scrollLcd.style.transition = 'none';
      } else {
        const textWidth = scrollLcd.scrollWidth;
        const totalDistance = textWidth + containerWidth;
        const duration = totalDistance / speed;

        scrollLcd.style.left = '0';
        scrollLcd.style.top = '50%';
        scrollLcd.style.transform = 'translateY(0%)';
        scrollLcd.style.transition = 'none';
        
        setTimeout(() => {
          scrollLcd.style.transition = `transform ${duration}s linear`;
          scrollLcd.style.transform = `translateX(-${totalDistance}px)`;
        }, 500);
      }
      
      // ì§€ì •ëœ ì˜¤ë””ì˜¤ ì¬ìƒ
      console.log(`ì§€ì •ëœ ì˜¤ë””ì˜¤ ì¬ìƒ: ${audioId}`);
      playAudioSafely(audioId);

      // 5.38ì´ˆ í›„ â†’ ì²« í™”ë©´ ìˆ¨ê¸°ê³  â†’ ë‹¤ìŒ ì •ë¥˜ì†Œ í‘œì‹œ
      display2Timeout = setTimeout(() => {
        scrollLcd.style.display = 'none';
        topLabel.style.display = 'none';
        centerLine.style.display = 'none';

        setTimeout(() => {
          topLabel.textContent = 'ë‹¤ìŒ ì •ë¥˜ì†Œ';
          topLabel.style.color = currentModel === 'old' ? '#37d85c' : 'lime';
          topLabel.style.display = 'block';

          // ë‹¤ìŒ ì •ë¥˜ì†Œ í…ìŠ¤íŠ¸ ì„¤ì •
          let nextStationText = '';
          if (station.name === 'ëª©ë™ì•¼êµ¬ì¥') {
            nextStationText = 'ëª©5ë™ì£¼ë¯¼ì„¼í„°';
          } else if (station.name === 'ëª©ë™5ë‹¨ì§€Cìƒê°€') {
            nextStationText = 'ëª©ë™5ë‹¨ì§€Bìƒê°€';
          } else if (station.name === 'ëª©ë™5ë‹¨ì§€Bìƒê°€') {
            nextStationText = 'ëª©ë™6ë‹¨ì§€ìƒê°€,ì´ëŒ€ë³‘ì›ì…êµ¬';
          } else if (station.name === 'ëª©ë™6ë‹¨ì§€ìƒê°€') {
            nextStationText = 'ì–‘í‰í•œì‹ ì•„íŒŒíŠ¸, 9í˜¸ì„ ì„ ìœ ë„ì—­';
          } else if (station.name === 'ì„ ìœ ë„ì—­') {
            nextStationText = 'ì›”ì´Œì¤‘í•™êµ';
          } else if (station.name === 'ì›”ì´Œì¤‘í•™êµ') {
            nextStationText = 'ëª©ë™2ë‹¨ì§€ìƒê°€';
          } else if (station.name === 'ë‹¹ì‚°ì—­') {
            nextStationText = 'ì–‘í‰í•œì‹ ì•„íŒŒíŠ¸, 9í˜¸ì„ ì„ ìœ ë„ì—­';
          }
          
          scrollLcd.textContent = nextStationText;
          scrollLcd.style.display = 'block';

          // ë‹¤ìŒ ì •ë¥˜ì†Œê°€ ëª©ë™5ë‹¨ì§€Bìƒê°€, ëª©5ë™ì£¼ë¯¼ì„¼í„°, ëª©ë™ì•¼êµ¬ì¥ì¸ ê²½ìš° ê°€ìš´ë° ì •ë ¬
          if (nextStationText === 'ëª©ë™5ë‹¨ì§€Bìƒê°€' || nextStationText === 'ëª©5ë™ì£¼ë¯¼ì„¼í„°' || nextStationText === 'ëª©ë™ì•¼êµ¬ì¥,í–‰ë³µí•œì„¸ìƒ' || nextStationText === 'ëª©ë™2ë‹¨ì§€ìƒê°€') {
            scrollLcd.style.left = '50%';
            scrollLcd.style.top = '50%';
            scrollLcd.style.transform = 'translateX(-50%) translateY(0%)';
            scrollLcd.style.transition = 'none';
          } else {
            scrollLcd.style.left = '0';
            scrollLcd.style.top = '50%';
            scrollLcd.style.transform = 'translateY(0%)';
            scrollLcd.style.transition = 'none';
            
            // ë‹¤ìŒ ì •ë¥˜ì†Œ í…ìŠ¤íŠ¸ë„ ìŠ¤í¬ë¡¤ ì• ë‹ˆë©”ì´ì…˜ ì ìš©
            const nextTextWidth = scrollLcd.scrollWidth;
            const nextTotalDistance = nextTextWidth + containerWidth;
            const nextDuration = nextTotalDistance / speed;

            setTimeout(() => {
              scrollLcd.style.transition = `transform ${nextDuration}s linear`;
              scrollLcd.style.transform = `translateX(-${nextTotalDistance}px)`;
            }, 500);
          }

          centerLine.style.display = 'block';
          updateColors(); // ìƒ‰ìƒ ì—…ë°ì´íŠ¸
        }, 500);
      }, 5380);

      // 12ì´ˆ í›„ â†’ ì˜ì–´ ì•ˆë‚´ë¡œ êµì²´
      setTimeout(() => {
        topLabel.textContent = 'THIS STOP IS';
        topLabel.style.display = 'block';

        // ì˜ì–´ í…ìŠ¤íŠ¸ ì„¤ì •
        let engText = '';
        if (station.name === 'ëª©ë™ì•¼êµ¬ì¥') {
          engText = 'Mokdong Baseball Stadium, Happy World';
        } else if (station.name === 'ëª©ë™5ë‹¨ì§€Cìƒê°€') {
          engText = 'Mok 5dong Office';
        } else if (station.name === 'ëª©ë™5ë‹¨ì§€Bìƒê°€') {
          engText = 'Mokdong 5 Danji B Store';
        } else if (station.name === 'ëª©ë™6ë‹¨ì§€ìƒê°€') {
          engText = 'Mokdong 6 Danji Store, Ewha Womans Univ. Mok-dong Hospital';
        } else if (station.name === 'ì„ ìœ ë„ì—­') {
          engText = 'Mok 1 Danji Store. Ewha Womans Univ. Mok-dong Hospital';
        } else if (station.name === 'ì›”ì´Œì¤‘í•™êµ') {
          engText = 'Mok 1 Danji Store. Ewha Womans Univ. Mok-dong Hospital';
        } else if (station.name === 'ë‹¹ì‚°ì—­') {
          engText = 'Line 2,9 Dangsan Station';
        }

        scrollLcd.textContent = engText;
        scrollLcd.style.left = '0';
        scrollLcd.style.top = '50%';
        scrollLcd.style.transform = 'translateY(0%)';
        scrollLcd.style.transition = 'none';
        scrollLcd.style.display = 'block';
        updateColors(); // ìƒ‰ìƒ ì—…ë°ì´íŠ¸

        const engTextWidth = scrollLcd.scrollWidth;
        const engTotalDistance = engTextWidth + containerWidth;
        const engDuration = engTotalDistance / speed;

        setTimeout(() => {
          scrollLcd.style.transition = `transform ${engDuration}s linear`;
          scrollLcd.style.transform = `translate(-${engTotalDistance}px, 0%)`;
        }, 500);
      }, 12000);

      // 21.85ì´ˆ í›„ â†’ ëª¨ë‘ ìˆ¨ê¹€ (0.5ì´ˆ)
      setTimeout(() => {
        topLabel.style.display = 'none';
        scrollLcd.style.display = 'none';
        centerLine.style.display = 'none';

        setTimeout(() => {
          topLabel.textContent = 'NEXT STOP IS';
          topLabel.style.display = 'block';

          // ì˜ì–´ ë‹¤ìŒ ì •ë¥˜ì†Œ í…ìŠ¤íŠ¸ ì„¤ì •
          let engNextText = '';
          if (station.name === 'ëª©ë™ì•¼êµ¬ì¥') {
            engNextText = 'Mok 5dong Office';
          } else if (station.name === 'ëª©ë™5ë‹¨ì§€Cìƒê°€') {
            engNextText = 'Mokdong 5 Danji B Store';
          } else if (station.name === 'ëª©ë™5ë‹¨ì§€Bìƒê°€') {
            engNextText = 'Mokdong 6 Danji Store, Ewha Womans Univ. Mok-dong Hospital';
          } else if (station.name === 'ëª©ë™6ë‹¨ì§€ìƒê°€') {
            engNextText = 'Yangpyeong Hanshin Apt. Line 9 Seonyudo Station';
          } else if (station.name === 'ì„ ìœ ë„ì—­') {
            engNextText = 'Mok 1 Danji Store. Ewha Womans Univ. Mok-dong Hospital';
          } else if (station.name === 'ì›”ì´Œì¤‘í•™êµ') {
            engNextText = 'Mokdong 2 Danji Stores';
          } else if (station.name === 'ë‹¹ì‚°ì—­') {
            engNextText = 'Yangpyeong Hanshin Apt. Line 9 Seonyudo Station';
          }

          scrollLcd.textContent = engNextText;
          scrollLcd.style.left = '0';
          scrollLcd.style.top = '50%';
          scrollLcd.style.transform = 'translateY(0%)';
          scrollLcd.style.transition = 'none';
          scrollLcd.style.display = 'block';

          centerLine.style.display = 'block';
          updateColors(); // ìƒ‰ìƒ ì—…ë°ì´íŠ¸

          const engNextTextWidth = scrollLcd.scrollWidth;
          const engNextTotalDistance = engNextTextWidth + containerWidth;
          const engNextDuration = engNextTotalDistance / speed;

          setTimeout(() => {
            scrollLcd.style.transition = `transform ${engNextDuration}s linear`;
            scrollLcd.style.transform = `translate(-${engNextTotalDistance}px, 0%)`;
          }, 500);
        }, 500);
      }, 21850);

      // 30ì´ˆ í›„ â†’ ì²« ë²ˆì§¸ ë””ìŠ¤í”Œë ˆì´ë¡œ ë³µê·€
      setTimeout(() => {
        topLabel.style.display = 'none';
        scrollLcd.style.display = 'none';
        centerLine.style.display = 'none';
        switchToDisplay1();
      }, 30000);
    }

    // ì •ë¥˜ì†Œë³„ ì•ˆë‚´ í•¨ìˆ˜
    function startStationAnnouncement(station) {
      console.log(`${station.name} ì •ë¥˜ì†Œ ì•ˆë‚´ ì‹œì‘`);
      currentDisplay = 2;
      
      // ì²« ë²ˆì§¸ ë””ìŠ¤í”Œë ˆì´ ì •ì§€
      if (display1Interval) {
        clearTimeout(display1Interval);
        console.log('ì²« ë²ˆì§¸ ë””ìŠ¤í”Œë ˆì´ íƒ€ì´ë¨¸ ì •ì§€ë¨');
      }
      
      // ëª¨ë“  ì²« ë²ˆì§¸ ë””ìŠ¤í”Œë ˆì´ ìš”ì†Œ ìˆ¨ê¸°ê¸°
      title.style.display = 'none';
      scrollTexts.forEach(item => document.getElementById(item.id).style.display = 'none');
      thirdTop.style.display = 'none';
      thirdBottom.style.display = 'none';
      fourthTop.style.display = 'none';
      fourthBottom.style.display = 'none';
      
      // ë‘ ë²ˆì§¸ ë””ìŠ¤í”Œë ˆì´ ìš”ì†Œë“¤ í‘œì‹œ
      topLabel.textContent = 'ì´ë²ˆ ì •ë¥˜ì†Œ';
      topLabel.style.display = 'block';
      scrollLcd.textContent = station.displayText;
      scrollLcd.style.display = 'block';
      centerLine.style.display = 'block';
      updateColors(); // ìƒ‰ìƒ ì—…ë°ì´íŠ¸
      
      // ëª©ë™5ë‹¨ì§€Bìƒê°€ì™€ ëª©5ë™ì£¼ë¯¼ì„¼í„°ëŠ” ê°€ìš´ë° ì •ë ¬, ë‚˜ë¨¸ì§€ëŠ” ìŠ¤í¬ë¡¤
      if (station.name === 'ëª©ë™5ë‹¨ì§€Bìƒê°€' || station.name === 'ëª©ë™5ë‹¨ì§€Cìƒê°€') {
        scrollLcd.style.left = '50%';
        scrollLcd.style.top = '50%';
        scrollLcd.style.transform = 'translateX(-50%) translateY(0%)';
        scrollLcd.style.transition = 'none';
      } else {
        const textWidth = scrollLcd.scrollWidth;
        const totalDistance = textWidth + containerWidth;
        const duration = totalDistance / speed;

        scrollLcd.style.left = '0';
        scrollLcd.style.top = '50%';
        scrollLcd.style.transform = 'translateY(0%)';
        scrollLcd.style.transition = 'none';
        
        setTimeout(() => {
          scrollLcd.style.transition = `transform ${duration}s linear`;
          scrollLcd.style.transform = `translateX(-${totalDistance}px)`;
        }, 500);
      }
      
      // ë°©í–¥ì— ë”°ë¥¸ ì˜¤ë””ì˜¤ ì¬ìƒ
      let audioToPlay = station.audio;
      
      // ë‹¹ì‚°ì—­ì˜ ê²½ìš° ë°©í–¥ì— ë”°ë¼ ë‹¤ë¥¸ ì˜¤ë””ì˜¤ ì¬ìƒ
      if (station.name === 'ë‹¹ì‚°ì—­') {
        console.log(`ë‹¹ì‚°ì—­ ì•ˆë‚´ - í˜„ì¬ ë°©í–¥: ${currentDirection}`);
        if (currentDirection === 'up') {
          audioToPlay = 'dangsanSunAudio'; // ìƒí–‰: ë‹¹ì‚°â†’ëª©ë™
          console.log('ìƒí–‰ ëª¨ë“œ: dangsanSunAudio ì„ íƒ');
        } else {
          audioToPlay = 'dangsanAudio'; // í•˜í–‰ ë˜ëŠ” ê¸°ë³¸
          console.log('í•˜í–‰ ëª¨ë“œ ë˜ëŠ” ê¸°ë³¸: dangsanAudio ì„ íƒ');
        }
      }
      
      console.log(`ìµœì¢… ì„ íƒëœ ì˜¤ë””ì˜¤: ${audioToPlay}`);
      playAudioSafely(audioToPlay);

      // 5.38ì´ˆ í›„ â†’ ì²« í™”ë©´ ìˆ¨ê¸°ê³  â†’ ë‹¤ìŒ ì •ë¥˜ì†Œ í‘œì‹œ
      display2Timeout = setTimeout(() => {
        scrollLcd.style.display = 'none';
        topLabel.style.display = 'none';
        centerLine.style.display = 'none';

        setTimeout(() => {
          topLabel.textContent = 'ë‹¤ìŒ ì •ë¥˜ì†Œ';
          topLabel.style.color = currentModel === 'old' ? '#37d85c' : 'lime';
          topLabel.style.display = 'block';

          // ë‹¤ìŒ ì •ë¥˜ì†Œ í…ìŠ¤íŠ¸ ì„¤ì •
          let nextStationText = '';
          if (station.name === 'ëª©ë™ì•¼êµ¬ì¥') {
            nextStationText = 'ëª©5ë™ì£¼ë¯¼ì„¼í„°';
          } else if (station.name === 'ëª©ë™5ë‹¨ì§€Cìƒê°€') {
            nextStationText = 'ëª©ë™5ë‹¨ì§€Bìƒê°€';
          } else if (station.name === 'ëª©ë™5ë‹¨ì§€Bìƒê°€') {
            nextStationText = 'ëª©ë™6ë‹¨ì§€ìƒê°€,ì´ëŒ€ë³‘ì›ì…êµ¬';
          } else if (station.name === 'ëª©ë™6ë‹¨ì§€ìƒê°€') {
            nextStationText = 'ì–‘í‰í•œì‹ ì•„íŒŒíŠ¸, 9í˜¸ì„ ì„ ìœ ë„ì—­';
          } else if (station.name === 'ì„ ìœ ë„ì—­') {
            nextStationText = 'ì›”ì´Œì¤‘í•™êµ';
          } else if (station.name === 'ì›”ì´Œì¤‘í•™êµ') {
            nextStationText = 'ëª©ë™2ë‹¨ì§€ìƒê°€';
          } else if (station.name === 'ë‹¹ì‚°ì—­') {
            nextStationText = 'ì–‘í‰í•œì‹ ì•„íŒŒíŠ¸, 9í˜¸ì„ ì„ ìœ ë„ì—­';
          }
          
          scrollLcd.textContent = nextStationText;
          scrollLcd.style.display = 'block';

          // ë‹¤ìŒ ì •ë¥˜ì†Œê°€ ëª©ë™5ë‹¨ì§€Bìƒê°€, ëª©5ë™ì£¼ë¯¼ì„¼í„°, ëª©ë™ì•¼êµ¬ì¥ì¸ ê²½ìš° ê°€ìš´ë° ì •ë ¬
          if (nextStationText === 'ëª©ë™5ë‹¨ì§€Bìƒê°€' || nextStationText === 'ëª©5ë™ì£¼ë¯¼ì„¼í„°' || nextStationText === 'ëª©ë™ì•¼êµ¬ì¥,í–‰ë³µí•œì„¸ìƒ' || nextStationText === 'ëª©ë™2ë‹¨ì§€ìƒê°€') {
            scrollLcd.style.left = '50%';
            scrollLcd.style.top = '50%';
            scrollLcd.style.transform = 'translateX(-50%) translateY(0%)';
            scrollLcd.style.transition = 'none';
          } else {
            scrollLcd.style.left = '0';
            scrollLcd.style.top = '50%';
            scrollLcd.style.transform = 'translateY(0%)';
            scrollLcd.style.transition = 'none';
            
            // ë‹¤ìŒ ì •ë¥˜ì†Œ í…ìŠ¤íŠ¸ë„ ìŠ¤í¬ë¡¤ ì• ë‹ˆë©”ì´ì…˜ ì ìš©
            const nextTextWidth = scrollLcd.scrollWidth;
            const nextTotalDistance = nextTextWidth + containerWidth;
            const nextDuration = nextTotalDistance / speed;

            setTimeout(() => {
              scrollLcd.style.transition = `transform ${nextDuration}s linear`;
              scrollLcd.style.transform = `translateX(-${nextTotalDistance}px)`;
            }, 500);
          }

          centerLine.style.display = 'block';
          updateColors(); // ìƒ‰ìƒ ì—…ë°ì´íŠ¸
        }, 500);
      }, 5380);

      // 12ì´ˆ í›„ â†’ ì˜ì–´ ì•ˆë‚´ë¡œ êµì²´
      setTimeout(() => {
        topLabel.textContent = 'THIS STOP IS';
        topLabel.style.display = 'block';

        // ì˜ì–´ í…ìŠ¤íŠ¸ ì„¤ì •
        let engText = '';
        if (station.name === 'ëª©ë™ì•¼êµ¬ì¥') {
          engText = 'Mokdong Baseball Stadium, Happy World';
        } else if (station.name === 'ëª©ë™5ë‹¨ì§€Cìƒê°€') {
          engText = 'Mok 5dong Office';
        } else if (station.name === 'ëª©ë™5ë‹¨ì§€Bìƒê°€') {
          engText = 'Mokdong 5 Danji B Store';
        } else if (station.name === 'ëª©ë™6ë‹¨ì§€ìƒê°€') {
          engText = 'Mokdong 6 Danji Store, Ewha Womans Univ. Mok-dong Hospital';
        } else if (station.name === 'ì„ ìœ ë„ì—­') {
          engText = 'Mok 1 Danji Store. Ewha Womans Univ. Mok-dong Hospital';
        } else if (station.name === 'ì›”ì´Œì¤‘í•™êµ') {
          engText = 'Mok 1 Danji Store. Ewha Womans Univ. Mok-dong Hospital';
        } else if (station.name === 'ë‹¹ì‚°ì—­') {
          engText = 'Line 2,9 Dangsan Station';
        }

        scrollLcd.textContent = engText;
        scrollLcd.style.left = '0';
        scrollLcd.style.top = '50%';
        scrollLcd.style.transform = 'translateY(0%)';
        scrollLcd.style.transition = 'none';
        scrollLcd.style.display = 'block';
        updateColors(); // ìƒ‰ìƒ ì—…ë°ì´íŠ¸

        const engTextWidth = scrollLcd.scrollWidth;
        const engTotalDistance = engTextWidth + containerWidth;
        const engDuration = engTotalDistance / speed;

        setTimeout(() => {
          scrollLcd.style.transition = `transform ${engDuration}s linear`;
          scrollLcd.style.transform = `translate(-${engTotalDistance}px, 0%)`;
        }, 500);
      }, 12000);

      // 21.85ì´ˆ í›„ â†’ ëª¨ë‘ ìˆ¨ê¹€ (0.5ì´ˆ)
      setTimeout(() => {
        topLabel.style.display = 'none';
        scrollLcd.style.display = 'none';
        centerLine.style.display = 'none';

        setTimeout(() => {
          topLabel.textContent = 'NEXT STOP IS';
          topLabel.style.display = 'block';

          // ì˜ì–´ ë‹¤ìŒ ì •ë¥˜ì†Œ í…ìŠ¤íŠ¸ ì„¤ì •
          let engNextText = '';
          if (station.name === 'ëª©ë™ì•¼êµ¬ì¥') {
            engNextText = 'Mok 5dong Office';
          } else if (station.name === 'ëª©ë™5ë‹¨ì§€Cìƒê°€') {
            engNextText = 'Mokdong 5 Danji B Store';
          } else if (station.name === 'ëª©ë™5ë‹¨ì§€Bìƒê°€') {
            engNextText = 'Mokdong 6 Danji Store, Ewha Womans Univ. Mok-dong Hospital';
          } else if (station.name === 'ëª©ë™6ë‹¨ì§€ìƒê°€') {
            engNextText = 'Yangpyeong Hanshin Apt. Line 9 Seonyudo Station';
          } else if (station.name === 'ì„ ìœ ë„ì—­') {
            engNextText = 'Mok 1 Danji Store. Ewha Womans Univ. Mok-dong Hospital';
          } else if (station.name === 'ì›”ì´Œì¤‘í•™êµ') {
            engNextText = 'Mokdong 2 Danji Stores';
          } else if (station.name === 'ë‹¹ì‚°ì—­') {
            engNextText = 'Yangpyeong Hanshin Apt. Line 9 Seonyudo Station';
          }

          scrollLcd.textContent = engNextText;
          scrollLcd.style.left = '0';
          scrollLcd.style.top = '50%';
          scrollLcd.style.transform = 'translateY(0%)';
          scrollLcd.style.transition = 'none';
          scrollLcd.style.display = 'block';

          centerLine.style.display = 'block';
          updateColors(); // ìƒ‰ìƒ ì—…ë°ì´íŠ¸

          const eng2Width = scrollLcd.scrollWidth;
          const eng2TotalDistance = eng2Width + containerWidth;
          const eng2Duration = eng2TotalDistance / speed;

          // ëª©ë™1ë‹¨ì§€ìƒê°€ ì˜ì–´ ì•ˆë‚´ë§Œ 3ì´ˆ ë” ì˜¤ë˜ ë³´ì—¬ì¤Œ
          const engNextDelay = engNextText === 'Mok 1 Danji Store. Ewha Womans Univ. Mok-dong Hospital' ? 3500 : 500;
          setTimeout(() => {
            scrollLcd.style.transition = `transform ${eng2Duration}s linear`;
            scrollLcd.style.transform = `translate(-${eng2TotalDistance}px, 0%)`;
            // ì •ë¥˜ì†Œ ì•ˆë‚´ ì™„ë£Œ í›„ ì•ˆë‚´ ë¬¸êµ¬ë¡œ ìë™ ì „í™˜
            setTimeout(() => {
              switchToDisplay1();
            }, (eng2Duration + 0.5) * 1000);
          }, engNextDelay);
        }, 500);
      }, 21850);
      
      // ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì—…ë°ì´íŠ¸
      display2Btn.classList.add('active');
      display1Btn.classList.remove('active');
      
      // ìƒ‰ìƒ ì—…ë°ì´íŠ¸
      updateColors();
    }

    function switchToDisplay2() {
      console.log('switchToDisplay2 í•¨ìˆ˜ í˜¸ì¶œë¨');
      // ê¸°ë³¸ì ìœ¼ë¡œ ì„ ìœ ë„ì—­ìœ¼ë¡œ ì‹œì‘ (startDisplay2 í•¨ìˆ˜ ì‚¬ìš©)
      startDisplay2();
      console.log('startDisplay2 í•¨ìˆ˜ í˜¸ì¶œ ì™„ë£Œ');
    }

    // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
    display1Btn.addEventListener('click', switchToDisplay1);
    display2Btn.addEventListener('click', () => {
      // ì •ë¥˜ì†Œ ì•ˆë‚´ ë²„íŠ¼ í´ë¦­ ì‹œ ì‚¬ìš©ì ìƒí˜¸ì‘ìš©ìœ¼ë¡œ ê°„ì£¼
      if (!userInteracted) {
        userInteracted = true;
        console.log('ì •ë¥˜ì†Œ ì•ˆë‚´ ë²„íŠ¼ í´ë¦­ìœ¼ë¡œ ì‚¬ìš©ì ìƒí˜¸ì‘ìš© ê°ì§€');
        if (audio) {
          audio.load();
        }
      }
      console.log('ì •ë¥˜ì†Œ ì•ˆë‚´ ë²„íŠ¼ í´ë¦­ë¨ - switchToDisplay2 í˜¸ì¶œ');
      switchToDisplay2();
    });
    
    // êµ¬í˜•/ì‹ í˜• ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
    oldModelBtn.addEventListener('click', () => {
      currentModel = 'old';
      oldModelBtn.classList.add('active');
      newModelBtn.classList.remove('active');
      updateColors();
      console.log('êµ¬í˜• ëª¨ë“œë¡œ ë³€ê²½');
    });
    
    newModelBtn.addEventListener('click', () => {
      currentModel = 'new';
      newModelBtn.classList.add('active');
      oldModelBtn.classList.remove('active');
      updateColors();
      console.log('ì‹ í˜• ëª¨ë“œë¡œ ë³€ê²½');
    });
    
    // ì˜¤ë””ì˜¤ ìë™ ì¬ìƒì„ ìœ„í•œ ì‚¬ìš©ì ìƒí˜¸ì‘ìš© ê°ì§€
    let userInteracted = false;
    
    // ì•ˆì „í•œ ì˜¤ë””ì˜¤ ì¬ìƒ í•¨ìˆ˜
    function playAudioSafely(audioId) {
      console.log(`ì˜¤ë””ì˜¤ ì¬ìƒ ì‹œë„: ${audioId}, ì‚¬ìš©ì ìƒí˜¸ì‘ìš©: ${userInteracted}`);
      
      if (!userInteracted) {
        console.log('ì‚¬ìš©ì ìƒí˜¸ì‘ìš©ì´ ì—†ì–´ì„œ ì˜¤ë””ì˜¤ ì¬ìƒ ê±´ë„ˆëœ€');
        return;
      }
      
      const audioElement = document.getElementById(audioId);
      if (!audioElement) {
        console.log(`ì˜¤ë””ì˜¤ ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ: ${audioId}`);
        return;
      }
      
      console.log(`${audioId} ì˜¤ë””ì˜¤ ì¬ìƒ ì‹œì‘`);
      audioElement.volume = 1.0;
      audioElement.play().then(() => {
        console.log(`${audioId} ì˜¤ë””ì˜¤ ì¬ìƒ ì„±ê³µ`);
      }).catch(error => {
        console.log(`ì˜¤ë””ì˜¤ ì¬ìƒ ì‹¤íŒ¨ (${audioId}):`, error);
      });
    }
    
    // í˜ì´ì§€ í´ë¦­ ì‹œ ì˜¤ë””ì˜¤ ì¬ìƒ í—ˆìš©
    document.addEventListener('click', function() {
      if (!userInteracted) {
        userInteracted = true;
        console.log('ì‚¬ìš©ì ìƒí˜¸ì‘ìš© ê°ì§€: ì˜¤ë””ì˜¤ ì¬ìƒ ê°€ëŠ¥');
        // ëª¨ë“  ì˜¤ë””ì˜¤ë¥¼ ë¯¸ë¦¬ ë¡œë“œ
        const allAudios = ['announcement', 'dangsanAudio', 'dangsanSunAudio', 'mok6Audio', 'mok5bAudio', 'mok5cAudio', 'mokStadiumAudio'];
        allAudios.forEach(audioId => {
          const audioElement = document.getElementById(audioId);
          if (audioElement) {
            audioElement.load();
            console.log(`${audioId} ì˜¤ë””ì˜¤ ë¡œë“œ ì™„ë£Œ`);
          } else {
            console.log(`${audioId} ì˜¤ë””ì˜¤ ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ`);
          }
        });
      }
    }, { once: true });

    // ëª©í‘œ ìœ„ì¹˜ë“¤ (ì •ë¥˜ì†Œ ìœ„ì¹˜ë“¤)
    const stations = [
      {
        name: 'ëª©ë™ì•¼êµ¬ì¥',
        lat: 37.525889,
        lon: 126.875272,
        audio: 'mokStadiumAudio',
        displayText: 'ëª©ë™ì•¼êµ¬ì¥,í–‰ë³µí•œì„¸ìƒ'
      },
      {
        name: 'ëª©ë™5ë‹¨ì§€Cìƒê°€',
        lat: 37.531090,
        lon: 126.876995,
        audio: 'mok5cAudio',
        displayText: 'ëª©5ë™ì£¼ë¯¼ì„¼í„°'
      },
      {
        name: 'ëª©ë™5ë‹¨ì§€Bìƒê°€',
        lat: 37.535277,
        lon: 126.879630,
        audio: 'mok5bAudio',
        displayText: 'ëª©ë™5ë‹¨ì§€Bìƒê°€'
      },
      {
        name: 'ëª©ë™6ë‹¨ì§€ìƒê°€',
        lat: 37.536231,
        lon: 126.882298,
        audio: 'mok6Audio',
        displayText: 'ëª©ë™6ë‹¨ì§€ìƒê°€,ì´ëŒ€ë³‘ì›ì…êµ¬'
      },
      {
        name: 'ì„ ìœ ë„ì—­',
        lat: 37.539756,
        lon: 126.887565,
        audio: 'announcement',
        displayText: 'ì–‘í‰í•œì‹ ì•„íŒŒíŠ¸, 9í˜¸ì„ ì„ ìœ ë„ì—­'
      },
      {
        name: 'ì›”ì´Œì¤‘í•™êµ',
        lat: 37.540060,
        lon: 126.888740,
        audio: 'wolchonAudio',
        displayText: 'ëª©ë™1ë‹¨ì§€ìƒê°€,ì´ëŒ€ë³‘ì›ì…êµ¬'
      },
      {
        name: 'ë‹¹ì‚°ì—­',
        lat: 37.537096,
        lon: 126.900256,
        audio: 'dangsanAudio',
        displayText: 'ì§€í•˜ì²  2,9í˜¸ì„  ë‹¹ì‚°ì—­'
      }
    ];
    const targetRadius = 100; // 100ë¯¸í„° ë°˜ê²½
    
    // ë‘ ì§€ì  ê°„ì˜ ê±°ë¦¬ ê³„ì‚° í•¨ìˆ˜ (ë¯¸í„° ë‹¨ìœ„)
    function calculateDistance(lat1, lon1, lat2, lon2) {
      const R = 6371000; // ì§€êµ¬ ë°˜ì§€ë¦„ (ë¯¸í„°)
      const dLat = (lat2 - lat1) * Math.PI / 180;
      const dLon = (lon2 - lon1) * Math.PI / 180;
      const a = Math.sin(dLat/2) * Math.sin(dLat/2) +
                Math.cos(lat1 * Math.PI / 180) * Math.cos(lat2 * Math.PI / 180) *
                Math.sin(dLon/2) * Math.sin(dLon/2);
      const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));
      return R * c;
    }
    
    // GPS ìœ„ì¹˜ ì¶”ì 
    navigator.geolocation.watchPosition(pos => {
      const lat = pos.coords.latitude;
      const lon = pos.coords.longitude;
      
      // ë°©í–¥ ë¶„ì„
      const direction = analyzeDirection(lat, lon);
      if (direction !== 'unknown') {
        currentDirection = direction;
        console.log(`ë°©í–¥ ë¶„ì„: ${direction === 'up' ? 'ìƒí–‰(ë‹¹ì‚°â†’ëª©ë™)' : 'í•˜í–‰(ëª©ë™â†’ë‹¹ì‚°)'}`);
      }
      
      // ì´ì „ ìœ„ì¹˜ ì—…ë°ì´íŠ¸ (ë°©í–¥ ë¶„ì„ í›„ì— ì—…ë°ì´íŠ¸)
      previousLat = lat;
      previousLon = lon;
      
      // ê°€ì¥ ê°€ê¹Œìš´ ì •ë¥˜ì†Œ ì°¾ê¸°
      let nearestStation = null;
      let minDistance = Infinity;
      
      stations.forEach(station => {
        const distance = calculateDistance(lat, lon, station.lat, station.lon);
        if (distance < minDistance) {
          minDistance = distance;
          nearestStation = station;
        }
      });
      
      locationDisplay.textContent = `ìœ„ì¹˜: ${lat.toFixed(6)}, ${lon.toFixed(6)} (ê°€ì¥ ê°€ê¹Œìš´ ì •ë¥˜ì†Œ: ${nearestStation.name} ${minDistance.toFixed(0)}m, ë°©í–¥: ${currentDirection === 'up' ? 'ìƒí–‰' : currentDirection === 'down' ? 'í•˜í–‰' : 'ë¶ˆëª…'})`;
      
      // ë””ë²„ê¹…ì„ ìœ„í•œ ë¡œê·¸ ì¶”ê°€
      console.log(`í˜„ì¬ ê±°ë¦¬: ${minDistance.toFixed(0)}m, ëª©í‘œ ë°˜ê²½: ${targetRadius}m, í˜„ì¬ ë””ìŠ¤í”Œë ˆì´: ${currentDisplay}, ê°€ì¥ ê°€ê¹Œìš´ ì •ë¥˜ì†Œ: ${nearestStation.name}, ë°©í–¥: ${currentDirection}`);
      
      // ëª©í‘œ ìœ„ì¹˜ 100m ì´ë‚´ì— ìˆê³ , í˜„ì¬ ì•ˆë‚´ ë¬¸êµ¬ ëª¨ë“œì¼ ë•Œ ìë™ìœ¼ë¡œ ì •ë¥˜ì†Œ ì•ˆë‚´ ì‹œì‘
      if (minDistance <= targetRadius && currentDisplay === 1) {
        console.log(`${nearestStation.name} ê·¼ì²˜ ë„ì°©! (ê±°ë¦¬: ${minDistance.toFixed(0)}m) ìë™ìœ¼ë¡œ ì •ë¥˜ì†Œ ì•ˆë‚´ ì‹œì‘`);
        startStationAnnouncement(nearestStation);
      }
      
      // 100m ë°–ìœ¼ë¡œ ë‚˜ê°€ë©´ ì•ˆë‚´ ë¬¸êµ¬ë¡œ ëŒì•„ê°€ê¸° (ë””ë²„ê¹…ìš©)
      if (minDistance > targetRadius && currentDisplay === 2) {
        console.log(`ì •ë¥˜ì†Œì—ì„œ ë©€ì–´ì§! (ê±°ë¦¬: ${minDistance.toFixed(0)}m) ì•ˆë‚´ ë¬¸êµ¬ë¡œ ëŒì•„ê°€ê¸°`);
        // ì£¼ì˜: ì´ ê¸°ëŠ¥ì€ í…ŒìŠ¤íŠ¸ìš©ì´ë¯€ë¡œ ì‹¤ì œ ì‚¬ìš© ì‹œì—ëŠ” ì£¼ì„ ì²˜ë¦¬í•˜ì„¸ìš”
        // switchToDisplay1();
      }
    }, err => {
      console.warn('GPS error:', err);
    }, { 
      enableHighAccuracy: true,
      maximumAge: 1000, // 1ì´ˆ ì´ë‚´ì˜ ìœ„ì¹˜ ì •ë³´ë§Œ ì‚¬ìš©
      timeout: 5000 // 5ì´ˆ íƒ€ì„ì•„ì›ƒ
    });

    // í…ŒìŠ¤íŠ¸ ë²„íŠ¼ë“¤ ìƒì„±
    const testBtnContainer = document.createElement('div');
    testBtnContainer.style.cssText = 'position: fixed; top: 20px; right: 20px; z-index: 1000; display: flex; flex-direction: column; gap: 10px; max-width: 400px;';
    
    // ëª©ë™ì•¼êµ¬ì¥ í…ŒìŠ¤íŠ¸ ë²„íŠ¼
    const mokStadiumTestBtn = document.createElement('button');
    mokStadiumTestBtn.textContent = 'ğŸ”Š ëª©ë™ì•¼êµ¬ì¥ ì•ˆë‚´ ì‹œì‘';
    mokStadiumTestBtn.style.cssText = 'padding: 15px 20px; background: #ff8800; color: white; border: 3px solid #cc6600; border-radius: 10px; cursor: pointer; font-size: 16px; font-weight: bold; box-shadow: 0 4px 8px rgba(0,0,0,0.3);';
    mokStadiumTestBtn.onclick = () => {
      console.log('ëª©ë™ì•¼êµ¬ì¥ í…ŒìŠ¤íŠ¸ ë²„íŠ¼ í´ë¦­');
      if (!userInteracted) {
        userInteracted = true;
        console.log('ëª©ë™ì•¼êµ¬ì¥ í…ŒìŠ¤íŠ¸ ë²„íŠ¼ í´ë¦­ìœ¼ë¡œ ì‚¬ìš©ì ìƒí˜¸ì‘ìš© ê°ì§€');
        playAudioSafely('mokStadiumAudio');
      }
      startStationAnnouncement(stations[0]);
    };
    
    // ëª©ë™5ë‹¨ì§€Cìƒê°€ í…ŒìŠ¤íŠ¸ ë²„íŠ¼
    const mok5cTestBtn = document.createElement('button');
    mok5cTestBtn.textContent = 'ğŸ”Š ëª©ë™5ë‹¨ì§€Cìƒê°€ ì•ˆë‚´ ì‹œì‘';
    mok5cTestBtn.style.cssText = 'padding: 15px 20px; background: #8800ff; color: white; border: 3px solid #6600cc; border-radius: 10px; cursor: pointer; font-size: 16px; font-weight: bold; box-shadow: 0 4px 8px rgba(0,0,0,0.3);';
    mok5cTestBtn.onclick = () => {
      console.log('ëª©ë™5ë‹¨ì§€Cìƒê°€ í…ŒìŠ¤íŠ¸ ë²„íŠ¼ í´ë¦­');
      if (!userInteracted) {
        userInteracted = true;
        console.log('ëª©ë™5ë‹¨ì§€Cìƒê°€ í…ŒìŠ¤íŠ¸ ë²„íŠ¼ í´ë¦­ìœ¼ë¡œ ì‚¬ìš©ì ìƒí˜¸ì‘ìš© ê°ì§€');
        playAudioSafely('mok5cAudio');
      }
      startStationAnnouncement(stations[1]);
    };
    
    // ëª©ë™5ë‹¨ì§€Bìƒê°€ í…ŒìŠ¤íŠ¸ ë²„íŠ¼
    const mok5bTestBtn = document.createElement('button');
    mok5bTestBtn.textContent = 'ğŸ”Š ëª©ë™5ë‹¨ì§€Bìƒê°€ ì•ˆë‚´ ì‹œì‘';
    mok5bTestBtn.style.cssText = 'padding: 15px 20px; background: #aa44aa; color: white; border: 3px solid #882288; border-radius: 10px; cursor: pointer; font-size: 16px; font-weight: bold; box-shadow: 0 4px 8px rgba(0,0,0,0.3);';
    mok5bTestBtn.onclick = () => {
      console.log('ëª©ë™5ë‹¨ì§€Bìƒê°€ í…ŒìŠ¤íŠ¸ ë²„íŠ¼ í´ë¦­');
      if (!userInteracted) {
        userInteracted = true;
        console.log('ëª©ë™5ë‹¨ì§€Bìƒê°€ í…ŒìŠ¤íŠ¸ ë²„íŠ¼ í´ë¦­ìœ¼ë¡œ ì‚¬ìš©ì ìƒí˜¸ì‘ìš© ê°ì§€');
        playAudioSafely('mok5bAudio');
      }
      startStationAnnouncement(stations[2]);
    };
    
    // ëª©ë™6ë‹¨ì§€ìƒê°€ í…ŒìŠ¤íŠ¸ ë²„íŠ¼
    const mok6TestBtn = document.createElement('button');
    mok6TestBtn.textContent = 'ğŸ”Š ëª©ë™6ë‹¨ì§€ìƒê°€ ì•ˆë‚´ ì‹œì‘';
    mok6TestBtn.style.cssText = 'padding: 15px 20px; background: #44aa44; color: white; border: 3px solid #228822; border-radius: 10px; cursor: pointer; font-size: 16px; font-weight: bold; box-shadow: 0 4px 8px rgba(0,0,0,0.3);';
    mok6TestBtn.onclick = () => {
      console.log('ëª©ë™6ë‹¨ì§€ìƒê°€ í…ŒìŠ¤íŠ¸ ë²„íŠ¼ í´ë¦­');
      if (!userInteracted) {
        userInteracted = true;
        console.log('ëª©ë™6ë‹¨ì§€ìƒê°€ í…ŒìŠ¤íŠ¸ ë²„íŠ¼ í´ë¦­ìœ¼ë¡œ ì‚¬ìš©ì ìƒí˜¸ì‘ìš© ê°ì§€');
        playAudioSafely('mok6Audio');
      }
      startStationAnnouncement(stations[3]);
    };
    
    // ì„ ìœ ë„ì—­ ìƒí–‰ í…ŒìŠ¤íŠ¸ ë²„íŠ¼
    const seonyudoUpTestBtn = document.createElement('button');
    seonyudoUpTestBtn.textContent = 'ğŸ”Š ì„ ìœ ë„ì—­ ìƒí–‰ ì•ˆë‚´';
    seonyudoUpTestBtn.style.cssText = 'padding: 15px 20px; background: #ff4444; color: white; border: 3px solid #cc0000; border-radius: 10px; cursor: pointer; font-size: 16px; font-weight: bold; box-shadow: 0 4px 8px rgba(0,0,0,0.3);';
    seonyudoUpTestBtn.onclick = () => {
      console.log('ì„ ìœ ë„ì—­ ìƒí–‰ í…ŒìŠ¤íŠ¸ ë²„íŠ¼ í´ë¦­');
      if (!userInteracted) {
        userInteracted = true;
        console.log('ì„ ìœ ë„ì—­ ìƒí–‰ í…ŒìŠ¤íŠ¸ ë²„íŠ¼ í´ë¦­ìœ¼ë¡œ ì‚¬ìš©ì ìƒí˜¸ì‘ìš© ê°ì§€');
      }
      currentDirection = 'up';
      startStationAnnouncementWithAudio(stations[4], 'dangsanSunAudio');
    };
    
    // ì„ ìœ ë„ì—­ í•˜í–‰ í…ŒìŠ¤íŠ¸ ë²„íŠ¼
    const seonyudoDownTestBtn = document.createElement('button');
    seonyudoDownTestBtn.textContent = 'ğŸ”Š ì„ ìœ ë„ì—­ í•˜í–‰ ì•ˆë‚´';
    seonyudoDownTestBtn.style.cssText = 'padding: 15px 20px; background: #ff6666; color: white; border: 3px solid #cc3333; border-radius: 10px; cursor: pointer; font-size: 16px; font-weight: bold; box-shadow: 0 4px 8px rgba(0,0,0,0.3);';
    seonyudoDownTestBtn.onclick = () => {
      console.log('ì„ ìœ ë„ì—­ í•˜í–‰ í…ŒìŠ¤íŠ¸ ë²„íŠ¼ í´ë¦­');
      if (!userInteracted) {
        userInteracted = true;
        console.log('ì„ ìœ ë„ì—­ í•˜í–‰ í…ŒìŠ¤íŠ¸ ë²„íŠ¼ í´ë¦­ìœ¼ë¡œ ì‚¬ìš©ì ìƒí˜¸ì‘ìš© ê°ì§€');
      }
      currentDirection = 'down';
      startStationAnnouncementWithAudio(stations[4], 'announcement');
    };
    
    // ì›”ì´Œì¤‘í•™êµ í…ŒìŠ¤íŠ¸ ë²„íŠ¼
    const wolchonTestBtn = document.createElement('button');
    wolchonTestBtn.textContent = 'ğŸ”Š ì›”ì´Œì¤‘í•™êµ ì•ˆë‚´ ì‹œì‘';
    wolchonTestBtn.style.cssText = 'padding: 15px 20px; background: #ffaa00; color: white; border: 3px solid #cc8800; border-radius: 10px; cursor: pointer; font-size: 16px; font-weight: bold; box-shadow: 0 4px 8px rgba(0,0,0,0.3);';
    wolchonTestBtn.onclick = () => {
      console.log('ì›”ì´Œì¤‘í•™êµ í…ŒìŠ¤íŠ¸ ë²„íŠ¼ í´ë¦­');
      if (!userInteracted) {
        userInteracted = true;
        console.log('ì›”ì´Œì¤‘í•™êµ í…ŒìŠ¤íŠ¸ ë²„íŠ¼ í´ë¦­ìœ¼ë¡œ ì‚¬ìš©ì ìƒí˜¸ì‘ìš© ê°ì§€');
        playAudioSafely('wolchonAudio');
      }
      startStationAnnouncement(stations[5]);
    };
    
    // ë‹¹ì‚°ì—­ í…ŒìŠ¤íŠ¸ ë²„íŠ¼
    const dangsanTestBtn = document.createElement('button');
    dangsanTestBtn.textContent = 'ğŸ”Š ë‹¹ì‚°ì—­ ì•ˆë‚´ ì‹œì‘';
    dangsanTestBtn.style.cssText = 'padding: 15px 20px; background: #4444ff; color: white; border: 3px solid #0000cc; border-radius: 10px; cursor: pointer; font-size: 16px; font-weight: bold; box-shadow: 0 4px 8px rgba(0,0,0,0.3);';
    dangsanTestBtn.onclick = () => {
      console.log('ë‹¹ì‚°ì—­ í…ŒìŠ¤íŠ¸ ë²„íŠ¼ í´ë¦­');
      if (!userInteracted) {
        userInteracted = true;
        console.log('ë‹¹ì‚°ì—­ í…ŒìŠ¤íŠ¸ ë²„íŠ¼ í´ë¦­ìœ¼ë¡œ ì‚¬ìš©ì ìƒí˜¸ì‘ìš© ê°ì§€');
        const dangsanAudio = document.getElementById('dangsanAudio');
        const dangsanSunAudio = document.getElementById('dangsanSunAudio');
        if (dangsanAudio) {
          dangsanAudio.load();
        }
        if (dangsanSunAudio) {
          dangsanSunAudio.load();
        }
      }
      startStationAnnouncement(stations[6]);
    };
    
    // ë°©í–¥ í…ŒìŠ¤íŠ¸ ë²„íŠ¼ë“¤
    const directionUpBtn = document.createElement('button');
    directionUpBtn.textContent = 'â¬†ï¸ ìƒí–‰ ëª¨ë“œ (ë‹¹ì‚°â†’ëª©ë™)';
    directionUpBtn.style.cssText = 'padding: 10px 15px; background: #ff6600; color: white; border: 2px solid #cc5500; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: bold; box-shadow: 0 2px 4px rgba(0,0,0,0.3);';
    directionUpBtn.onclick = () => {
      currentDirection = 'up';
      console.log('ìƒí–‰ ëª¨ë“œë¡œ ì„¤ì •: ë‹¹ì‚°â†’ëª©ë™');
      locationDisplay.textContent = locationDisplay.textContent.replace(/ë°©í–¥: [^)]+/, 'ë°©í–¥: ìƒí–‰');
      
      // ìƒí–‰ ì˜¤ë””ì˜¤ ë¯¸ë¦¬ ë¡œë“œ
      const dangsanSunAudio = document.getElementById('dangsanSunAudio');
      if (dangsanSunAudio) {
        dangsanSunAudio.load();
        console.log('dangsanSunAudio ë¡œë“œ ì™„ë£Œ');
      } else {
        console.log('dangsanSunAudio ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ');
      }
    };
    
    const directionDownBtn = document.createElement('button');
    directionDownBtn.textContent = 'â¬‡ï¸ í•˜í–‰ ëª¨ë“œ (ëª©ë™â†’ë‹¹ì‚°)';
    directionDownBtn.style.cssText = 'padding: 10px 15px; background: #0066ff; color: white; border: 2px solid #0055cc; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: bold; box-shadow: 0 2px 4px rgba(0,0,0,0.3);';
    directionDownBtn.onclick = () => {
      currentDirection = 'down';
      console.log('í•˜í–‰ ëª¨ë“œë¡œ ì„¤ì •: ëª©ë™â†’ë‹¹ì‚°');
      locationDisplay.textContent = locationDisplay.textContent.replace(/ë°©í–¥: [^)]+/, 'ë°©í–¥: í•˜í–‰');
    };
    
    // ì˜¤ë””ì˜¤ í…ŒìŠ¤íŠ¸ ë²„íŠ¼
    const audioTestBtn = document.createElement('button');
    audioTestBtn.textContent = 'ğŸ”Š ?';
    audioTestBtn.style.cssText = 'padding: 10px 15px; background: #ff0066; color: white; border: 2px solid #cc0055; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: bold; box-shadow: 0 2px 4px rgba(0,0,0,0.3);';
    audioTestBtn.onclick = () => {
      console.log('dangsanSunAudio í…ŒìŠ¤íŠ¸ ë²„íŠ¼ í´ë¦­');
      playAudioSafely('dangsanSunAudio');
    };
    
    testBtnContainer.appendChild(mokStadiumTestBtn);
    testBtnContainer.appendChild(mok5cTestBtn);
    testBtnContainer.appendChild(mok5bTestBtn);
    testBtnContainer.appendChild(mok6TestBtn);
    testBtnContainer.appendChild(seonyudoUpTestBtn);
    testBtnContainer.appendChild(seonyudoDownTestBtn);
    testBtnContainer.appendChild(wolchonTestBtn);
    testBtnContainer.appendChild(dangsanTestBtn);
    testBtnContainer.appendChild(directionUpBtn);
    testBtnContainer.appendChild(directionDownBtn);
    testBtnContainer.appendChild(audioTestBtn);
    document.body.appendChild(testBtnContainer);
    
    // ì¶”ê°€ë¡œ ì˜¤ë””ì˜¤ í™œì„±í™” ë²„íŠ¼ë„ í‘œì‹œ
    const audioBtn = document.createElement('button');
    audioBtn.id = 'audioBtn';
    audioBtn.textContent = 'ğŸ”Š ì˜¤ë””ì˜¤ í™œì„±í™”';
    audioBtn.style.cssText = 'position: fixed; top: 20px; left: 20px; z-index: 1000; padding: 10px 15px; background: #44aa44; color: white; border: 2px solid #228822; border-radius: 8px; cursor: pointer; font-size: 14px; font-weight: bold;';
    audioBtn.onclick = () => {
      if (!userInteracted) {
        userInteracted = true;
        console.log('ì˜¤ë””ì˜¤ í™œì„±í™” ë²„íŠ¼ í´ë¦­ìœ¼ë¡œ ì‚¬ìš©ì ìƒí˜¸ì‘ìš© ê°ì§€');
        // ëª¨ë“  ì˜¤ë””ì˜¤ë¥¼ ë¯¸ë¦¬ ë¡œë“œ
        const allAudios = ['announcement', 'dangsanAudio', 'dangsanSunAudio', 'mok6Audio', 'mok5bAudio', 'mok5cAudio', 'mokStadiumAudio'];
        allAudios.forEach(audioId => {
          const audioElement = document.getElementById(audioId);
          if (audioElement) {
            audioElement.load();
          }
        });
        audioBtn.textContent = 'âœ… ì˜¤ë””ì˜¤ í™œì„±í™”ë¨';
        audioBtn.style.background = '#228822';
        setTimeout(() => {
          audioBtn.style.display = 'none';
        }, 2000);
      }
    };
    document.body.appendChild(audioBtn);

    // ê²©ì ìƒì„±
    const gridOverlay = document.getElementById('grid-overlay');
    for (let i = 0; i < 128 * 32; i++) {
      const cell = document.createElement('div');
      cell.className = 'cell';
      gridOverlay.appendChild(cell);
    }

    // ì´ˆê¸° ìƒ‰ìƒ ì ìš©
    updateColors();
    
    // ì´ˆê¸° ë””ìŠ¤í”Œë ˆì´ ì‹œì‘
    switchToDisplay1();
  </script>
</body>
</html> 
